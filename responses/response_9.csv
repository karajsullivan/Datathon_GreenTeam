,Discussion ID,Author,Body,Likes,Date,Time
0,506528,SZanpure,"Ok another update after running terraform apply. The customer managed VPC endpoints are not accepted immediately by the NGFW/Palo trusted account. In my case, after running terraform apply, it took around 5-6 minutes, for the status to change from PENDING to ACCEPTED in NGFW Web UI. This meant that my terraform apply failed when creating routes for the VPC endpoints",0,06-27-2022,12:32 PM
1,506528,SZanpure,"Hi,@gfreemanTagging you. Hope that's ok.I completely un-subscribed and re-subscribed via AWS Marketplace and started with a clean slate. On the very first run of my provider, I always get this error belowI believe I am getting this error because the creation of cloudngfwaws resource via terraform finishes way before the actual NGFW has finished creation in Palo Web UI. This is causing the VPC Endpoint Service to be in a ""non-ready"" state when terraform queries it. Can this please be looked at?FYI, my terraform code for creating Palo NGFW is belowThe code which errors is belowOne last thing to note, is that if I wait for the NGFW to finish creation, and re-run my terraform code, I get the error below. After this, no matter how many times I re-run the build, I keep getting the same result",0,07-01-2022,04:06 AM
2,506528,priyer,"Hello@SZanpureGreetings from Palo Alto Networks!Issue 1 We are working on removing the necessity to specify the access key / secret key in the provider block. Not sure yet when it will come out, but it's on our list.Issue 2 - The API itself has changed how it behaves. We are working on an update for the provider.Issue 3 - This happens because you removed the global rulestack tag, so it's going to error.Issue 4 - Looks like you using underscores in the JSON config, if you want to do JSON config, you need to use hyphens.Regards,Prasanna IyerProduct SpecialistPalo Alto Networkslive.paloaltonetworks.com/t5/cloud-ngfw-help-center/ct-p/Cloud_NGFW",1,07-06-2022,04:50 PM
3,506528,SZanpure,"Thanks Prasanna. Regarding Issue 4, can you please update the docs with this info? Currently, neither Github nor Terraform provider docs page state this.https://github.com/PaloAltoNetworks/terraform-provider-cloudngfwaws/blob/main/docs/index.mdhttps://registry.terraform.io/providers/PaloAltoNetworks/cloudngfwaws/latest/docsHowever, your suggestion is valid, because the code seems to be looking for hyphenshttps://github.com/PaloAltoNetworks/terraform-provider-cloudngfwaws/blob/main/internal/provider/prov...Also, did you get a chance to get feedback from the backend team about the VPC Endpoint error I am facing above?Thanks,Shreyas",1,07-07-2022,05:01 AM
4,506528,priyer,"Hello@SZanpure,Greetings!The docmentation has been updated with theinformation.Kindly check the links.https://github.com/PaloAltoNetworks/terraform-provider-cloudngfwaws/blob/main/docs/index.mdhttps://registry.terraform.io/providers/PaloAltoNetworks/cloudngfwaws/latest/docsRegards,Prasanna IyerProduct SpecialistPalo Alto Networkshttps://live.paloaltonetworks.com/t5/cloud-ngfw-help-center/ct-p/Cloud_NGFW",0,07-07-2022,05:28 PM
5,506528,priyer,"Hello@SZanpure,Greetings!Regarding your VPC error:The team has noticed in the documentation that a note mentions that cloudngfwaws_commit_rulestack resource should be placed in a separate plan as the plan that configures the rulestack and its contents. We suggest you put it in a separate plan.Kindly refer to this linkhttps://registry.terraform.io/providers/PaloAltoNetworks/cloudngfwaws/latest/docs/resources/commit_r...Regards,Prasanna IyerProduct SpecialistPalo Alto Networkshttps://live.paloaltonetworks.com/t5/cloud-ngfw-help-center/ct-p/Cloud_NGFW",0,07-13-2022,04:30 PM
6,507132,SZanpure,This is my very first reply to my first private message. Therefore I guess the max limit is zero?,0,06-29-2022,12:23 PM
7,507132,mgordon,Hello@SZanpureLIVEcommunity admin here! I apologize for this issue. We are working with our community vendor right now for this. I will update here as quickly as possible,1,06-29-2022,01:40 PM
8,507132,SZanpure,"I will post more details here since PM is not working for now.I have subscribed to NGFW using Marketplace and tried to set the region to eu-west-2 in browser urlAfter setting my new password, I logged in and set the NGFW region to London in web UII then went to Add Account, and clicked Launch Cloudformation template. At this point, it opened a browser tab pointing to us-east-1, and the SNS Topic resource was pointing to us-east-1 as well. If I run the stack like this, it error as per the original post.I attempted changing the region in AWS console to eu-west-2 at this point, however that did not update CFT parameter values.Hope this provides a bit more info.",0,06-29-2022,02:04 PM
9,507132,asrinivasan,"Can you try running the template in us-east-1, it doesnt need to run in eu-west-2",0,06-29-2022,02:28 PM
10,507132,,"Hello Shreyas,Could you please run the cloud formation template in us-east-1 by doing which gets onboarded to us-east-1 and then try changing the region and creating resources in eu-west-2 regionRegards,Likith RProduct SpecialistPalo Alto Networkslive.paloaltonetworks.com/t5/cloud-ngfw-help-center/ct-p/Cloud_NGFW",0,06-29-2022,02:29 PM
11,507132,SZanpure,,0,06-29-2022,03:05 PM
12,507132,,"Hello Shreyas,Yes it will work If you run the template in us-east-1 and deploy rulestacks and NGFW in eu-west-2 as IAM is globalRegards,Likith RProduct SpecialistPalo Alto Networkslive.paloaltonetworks.com/t5/cloud-ngfw-help-center/ct-p/Cloud_NGFW",0,06-29-2022,05:16 PM
13,507132,SZanpure,This works now as per the solution discussion above thanks.,1,07-04-2022,01:21 AM
14,504890,benny,"Hello @crippsteI hope you are well! For FMS policy, there is no local firewall administrator. The local rulestack administrator associates the local rulestacks to NGFW. If the FMS service handshake is successful, any local firewall administrator call must be disabled, and the local rulestack administrator can associate the local rulestack to NGFW.Have a great day.Thanks & Regards,Edison K BennyProduct specialistPalo Alto Networkshttps://live.paloaltonetworks.com/t5/cloud-ngfw-help-center/ct-p/Cloud_NGFW*Don’t forget to accept the solution provided!*",0,06-23-2022,09:12 AM
15,505408,dtaneja,"Hello @SGopal11Greetings from Palo Alto Networks!I saw your post, and request you to confirm whether the Cloud NGFW resetting or dropping traffic (app shows incomplete) for all or for particular traffic.Please have a look at the below document:-https://knowledgebase.paloaltonetworks.com/KCSArticleDetail?id=kA10g000000ClibCACRegards,Devanshu TanejaProduct specialistPalo Alto Networkshttps://live.paloaltonetworks.com/t5/cloud-ngfw-help-center/ct-p/Cloud_NGFW",0,06-22-2022,08:42 AM
16,505408,SGopal11,Three-Way Handshake is failing only when it goes through the Palo Alto NGFW however if I bypass it works fine.it drops traffic for all TCP traffic - Ping and traceroute are the only one worksPlease refer to the diagram on my original post,0,06-22-2022,08:46 AM
17,505408,ssyed,"Hi, Can you please check the AWS route table and rulestack?",0,06-22-2022,09:47 AM
18,505408,SGopal11,"Hi Ssyed, Yes, that looks good as well - when I tweak the route table and bypass the NGFW endpoint it all works well.. But when I point it to NGFW endpoint the TCP handshakes doesnt get completed. Ping and traceroute works good. Rule Stack also has rules allowed",0,06-22-2022,10:11 AM
19,503128,MWhittaker,"Could this be the issue? In AWS FMS page, the disassociation is stuck for ever...",0,06-13-2022,07:02 AM
20,503128,XSun,"There is a iam role calledCustomerPANWCloudNGFWRole created under your account for PAN to assume, this role allow PAN to validate the VPC information for the firewall, can you verify that role still exist?",0,06-13-2022,09:47 AM
21,503128,MWhittaker,"I see this list right now. But then, PAN support has already cleaned up the cloud NGFW resources from your side. And i have deleted the IAM account from the portal.May be i will try to recreate the scenario and let you know if the cross-launch IAM roles are properly set",0,06-13-2022,09:56 PM
22,503128,XSun,"Sounds good. That AwsServiceLinkRole was controlled by AWS FMS, so you may not want to manually deleting it. Regarding your PaloAlto FW service, your account was reset back to init state, since you already cleaned up the role stack, you need do following to start able to deploy firewall again.1. Go to Account Page, download the CFT and run it.2. From PaloAlto SAAS UI User page, add LocalFirewall Admin and LocalRuleStack Admin role back to the Tenant Admin user.Then you should be ok.",0,06-13-2022,10:14 PM
23,503128,MWhittaker,Thanks. i will note it down to make sure i keep the link-role intact for PAN to operate into my account.I am running a test to delete my tenant account from the portal and also unsubscribe the cloud ngfw (a clean exit to start again).And i see this in the portal and thats good.But i still see that the subscription is active.How do i unsubscribe from the cloud ngfw service and delete the current tenant account in the portal? I dont see a way to do this myself.,0,06-13-2022,10:20 PM
24,503128,benny,"Hi @MWhittakerGreetings from Palo Alto Networks!To unsubscribe please navigate to AWS Marketplace > Manage Subscriptions > Palo Alto Networks Cloud NGFW.Regards,Edison K BennyProduct specialistPalo Alto Networkshttps://live.paloaltonetworks.com/t5/cloud-ngfw-help-center/ct-p/Cloud_NGFW*Don’t forget to accept the solution provided!*",0,06-15-2022,11:29 AM
25,503128,SGopal11,this did not help - as I still cannot see Manage NGFWs or create Firewall in Cloud Tenant. Old Firewall is still in Deleting status for almost 6 hours now,0,06-20-2022,02:15 PM
26,503435,avsingh,"Hi @MWhittakerGreetings from Palo Alto Networks!To unsubscribe please navigate to AWS Marketplace > Manage Subscriptions > Palo Alto Networks Cloud NGFW.Regards,Ravi Kumar SinghProduct specialistPalo Alto Networkshttps://live.paloaltonetworks.com/t5/cloud-ngfw-help-center/ct-p/Cloud_NGFW*Don’t forget to accept the solution provided!*",0,06-15-2022,12:43 PM
27,490183,ssyed,Did you try deleting the CFT template in your AWS account that you ran for IAM permissions?,0,05-24-2022,09:01 AM
28,490183,nattapong_thi,"Yes!, After waiting for many hours, Then deleted CFT 😂",0,05-24-2022,08:36 PM
29,490183,ssyed,So is the status still showing deleting?,0,05-24-2022,11:02 PM
30,490183,nattapong_thi,Yes,0,05-24-2022,11:37 PM
31,490183,benny,"Hi @nattapong_thiThis was caused by creating a firewall in the account and then using the same account to onboard to FMS with that original firewall still existing. There is an enhancement that allows users to work on both FMS and nonFMS use cases so that users can keep resources created when just onboarded as nonFMS users, then later onboard FMS and create resources by FMS policy, we will allow both to exist and operate at the same time.Edison K BennyProduct specialistPalo Alto Networkshttps://live.paloaltonetworks.com/t5/cloud-ngfw-help-center/ct-p/Cloud_NGFW*Don’t forget to accept the solution provided!*",1,05-31-2022,10:53 AM
32,490183,MWhittaker,"I too have the same issue.1. When you upgrade a standalone tenant account to an admin account for AWS FMS onboarding, deleting the NGFW resource goes for a whack.2. After waiting for an hour, i ended up deleting the stackset and the endpoint from my account thinking i need to clean up my account before the ngfw firewall resource will be cleaned up.3. I even revoked the admin access for my AWS account to make sure everything is clean from my side and then upgraded my account to administrator account again to try set things right. But no luck!4. The one thing that i noticed is that if i get to the ""Firewall Settings"" page, i get an error ""Account XXXX does not exist as a member"".5. I cannot add another AWS account now since the account is already onboarded (and i get a prompt popup mentioning the same)Somewhere, a disconnect/access permission issue makes it harder for the ngfw resources to get stuck in deleting state.",0,06-13-2022,06:40 AM
33,499059,nankumar,"Hi @EObert,Greetings from Palo Alto Networks!Apologize for the late response.This issue is related to CSP. I recommend you, open a support case for this so that the concerned team would be able to help you.Nandan KumarProduct specialistPalo Alto Networks",0,06-05-2022,06:05 PM
34,499059,EObert,"Hi Nandan Kumar,sorry, I'm not allowed to open a support case because the account memership has been expired!I'm in a loopback situation, right ?/rgdsEva-Maria",0,06-07-2022,02:38 AM
35,487924,slick,"I'm searching for the admin guide, but am not finding anything except this:Security policies determine whether to block or allow a session based on traffic attributes, such as the source and destination security zone, the source and destination IP address, and the service. Custom security policies are supported with fully automated RFCs. CTs to create or delete security policy can be found under Management | Managed Firewall | Outbound (Palo Alto) category, and the CT to edit an existing security policy can be found under Deployment | Managed Firewall | Outbound (Palo Alto) category. You'll be able to create new security policies, modify security policies, or delete security policies.",0,05-23-2022,12:01 PM
36,483472,gfreeman,"Run terraform apply with logging enabled, it might have more information:TF_LOG=debug terraform apply",1,04-28-2022,10:41 AM
37,483472,gfreeman,I have been told that the docs are wrong with regards to the tags needed for the role created in AWS. Change the tags as follows:,1,04-28-2022,11:43 AM
38,483472,SZanpure,"Thanks@gfreemanI made changes to the tags, and it made no difference. After switching on TF_LOG, I got an error message which might be of interest to you.The palo-ngfw-admin-role is setup as suchThe assume role policy for assuming the role above is set up as suchThe IAM role is set up asThe provider config is setup as followsAfter all this set up, the IAM user that I use to login to our sandbox account assumes the palo-ngfw-admin-role and tries to execute the api gateway which subsequently fails. Any ideas please?Regards,Shreyas",0,04-28-2022,01:31 PM
39,483472,gfreeman,"Looking at that response, it seems like something is misconfigured with your AWS setup.Found some other documentation and this does actually have the updated role tags that I mentioned above, so maybe there's something in here that's the answer..?https://pan.dev/cloudngfw/aws/api",0,04-28-2022,09:47 PM
40,483472,SZanpure,"Thanks@gfreemanThat document is exactly the same asthisone. The interesting part is that I had set up the tags properly as per that doc, but the result remains the same. Are you sure the perms on the API Gateway in your AWS Account are configured correctly? It might be that you need to re-deploy the API Gateway if you have changed the policies recently on your side. More infohereandhereHere is the IAM Role with the tagsHere is the assume role policy for cloud-firewall-adminAnd the IAM policy is configured exactly as per the docFrom the terraform debug logs, I can see that the role above is being assumed by my IAM user. The NGFW provider API requests are belowAs you can see, the provider tries to refresh JWT for both firewalladmin and rulestackadmin. The responses are belowAt this point I am not really sure what is mis-configured on my side. I have followed the docs as mentioned. Also the link for this repohttps://github.com/PaloAltoNetworks/CloudNGFW-AWS-Examplesseems to be broken (mentioned in step 6 of the guide I linked at the beginning of this post), so I cannot look at the CFT examples either.Regards,Shreyas",0,04-29-2022,02:14 AM
41,483472,gfreeman,"OK, two things:First is that I think the value of the tag is the important bit, not the key name. In my setup, the keys are actually named ""CloudNGFWFirewallAdmin1"" and ""CloudNgfwRulestackAdmin"". Try setting the values to the values mentioned in the 2nd link I provided and see if that changes the result.Second, since you are essentially stuck at, ""I'm trying to enable API access,"" this is fully supported TAC territory. If you have a support contract with Palo Alto Networks in place, then I'd encourage you to reach out to TAC for help. The Terraform provider is unreleased currently and should otherwise be considered beta code, but enabling API access has nothing to do with the provider.",0,04-29-2022,09:24 AM
42,483472,gfreeman,"Oh sorry, another thing: I just noticed that in your error message, the ARN looks different from mine, but there's enough stuff going on that I don't know if this is a result of how the AWS SDK formats things or not. And looking back, it does seem like you're using the ARN of the IAM role, but I just wanted to make sure... The ARN that I specify in the provider configure block looks like this, just wanted to be certain that's what yours looks like also (I was using two different ARNs instead of a single one):",0,04-29-2022,09:42 AM
43,483472,SZanpure,,0,04-29-2022,09:56 AM
44,483472,gfreeman,"I can't share my config, unfortunately..... But I'm glad that you can engage TAC for figuring out API access.",0,04-29-2022,11:22 AM
45,478170,gsekar,"Hello hparandekar,I saw your post and have a few recommendations for you.Programmatic Access: This feature is to provide capability for customers to access the backend API's directly, so that they can create FW resource and rulestacksFlowIf you want more clarification on programmatic access please go through the below link.https://docs.aws.amazon.com/general/latest/gr/aws-sec-cred-types.htmlYes you can use AWS Cloudformation Templates to create and manage Cloud NGFW resources.You can create a template that describes all the AWS resources that you want (like Amazon EC2 instances or Amazon RDS DB instances), and CloudFormation takes care of provisioning and configuring those resources for you. You don't need to individually create and configure AWS resources and figure out what's dependent on what; CloudFormation handles that.Thanks and Regards,Gopinath SekarPalo Alto Networks Technical Support Engineer",2,04-05-2022,12:10 AM
46,475650,ssyed,"Rulestacks define the NGFW traffic filtering behavior such as advanced access control (App-ID, URL Filtering) and threat prevention. A rulestack consists of a set of security rules , associated objects and security profiles.",2,03-24-2022,04:09 PM
47,475650,avsingh,"Hello Rapatil,Rulestacks define the NGFW traffic filtering behavior such as advanced access control (App-ID, URL Filtering) and threat prevention.A Rulestack can be associated with one or more Firewalls. Also, you can create two types of rule stacks-global and local.Global rule stacks apply to all firewalls in your deployment and local rule stacks apply to specific firewalls.In CloudNGFW you can create a rule stack by the following steps:1. log in to your CloudNGFW console.2. Under the manage tab > rule stack > create rule stack.Regards,Ravi Kumar SinghProduct SpecialistPalo Alto Networkslive.paloaltonetworks.com/t5/cloud-ngfw-help-center/ct-p/Cloud_NGFW*Don’t forget to accept the solution provided!*",2,03-28-2022,06:31 AM
48,475680,ssyed,Please check this link for more information.https://docs.paloaltonetworks.com/pan-os/8-1/pan-os-admin/threat-prevention/threat-signatures,1,03-25-2022,06:05 PM
49,475680,priyer,"Hello tzahroof,I saw your post and have a few recommendations for you.You can find more details about Severity levels in Threat logs:https://docs.paloaltonetworks.com/pan-os/10-0/pan-os-admin/monitoring/view-and-manage-logs/log-types...In CloudNgfw, to view the threat log you can use the following steps:1. Go to your logs.2. Check the threat log > Click on the upper-left arrow to expand the log.Following is the example of the threat log.Regards,Prasanna IyerProduct SpecialistPalo Alto Networkshttps://live.paloaltonetworks.com/t5/cloud-ngfw-help-center/ct-p/Cloud_NGFW*Don’t forget to accept the solution provided!*",1,03-28-2022,06:28 AM
50,475679,ssyed,Here is the list of App-IDhttps://applipedia.paloaltonetworks.com/,1,03-25-2022,06:04 PM
51,475679,ssomasundara,"Hello tzahroof,I saw your post and have a few recommendations for you.In the CloudNGFW the APP-ID concept is same as that of PA NGFW Firewalls and hence all the APP-ID's used are the same as of PA NGFW.The below link contains a up-to-date list of all the apps that we can use in APP-ID:https://applipedia.paloaltonetworks.com/In CloudNGFW, to configure APP-ID based security rules follow the below steps:1. Login into your CloudNGFW Console.2. Rulestacks > ""Rulestack name"" > Security Rules > Create > Granular Controls > Applications (App-ID™)3. You can use 'Match' to have the security rule configured for specific AppRegards,Sudhan SomasundaramProduct SpecialistPalo Alto Networkslilive.paloaltonetworks.com/t5/cloud-ngfw-help-center/ct-p/Cloud_NGFW*Don’t forget to accept the solution provided!*",1,03-28-2022,06:27 AM
52,475653,ssyed,Here is the complete list of URL Categories.https://knowledgebase.paloaltonetworks.com/KCSArticleDetail?id=kA10g000000Cm5hCAC,0,03-24-2022,04:27 PM
53,475653,,"Hello Rapatil,I saw your post and have a recommendation for you.You can find the list of Url categories in the below linkhttps://knowledgebase.paloaltonetworks.com/KCSArticleDetail?id=kA10g000000Cm5hCACIn the CloudNGFW you can find the Url-Categories by following the below steps :1. Log in to CloudNGFW Console2. Under Manage Tab > Rulestacks > Select your rulestack > Security profiles > Web based Threat Protection > URL Categories and Filtering3. Click on Edit and you can see the Url categoriesLikith RProduct SpecialistPalo Alto Networkslive.paloaltonetworks.com/t5/cloud-ngfw-help-center/ct-p/Cloud_NGFW*Don’t forget to accept the solution provided!*",0,03-28-2022,06:25 AM
